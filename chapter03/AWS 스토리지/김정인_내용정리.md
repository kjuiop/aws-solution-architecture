### 개요

- Amazon Simple Storage Service
    - 아카이브, 로그 파일, 재난 복구 이미지 등을 이용한 백업 관리
    - 저장된 빅데이터의 분석 업무에 활용
    - 정적 웹사이트 호스팅

- EC2 인스턴스의 OS 볼륨이 블록 스토리지인 반면 S3는 좀더 다양한 용도로 활용할 수 있는 무제한 용량의 객체 스토리지이다.
    - 블록스토리지란 Windows 의 NTFS, Linux의 Btrfs, ext4 등과 같은 파일 시스템을 위해 물리적 저장 장치를 블록 단위로 나눠둔 것을 의미한다.
    - 파일 시스템은 머신에 설치된 OS의 주요 기능 중 하나로서, OS 작동에 필요한 데이터를 읽어듥이기 위해 관련 파일과 데이터가 저장될 수 있는 공간을 분할 및 할당하는 역할을 의미한다.
    - 객체 스토리지란 어떤 형식의 데이터라도 저장할 수 있는 공간
        - OS 와 관련된 복잡한 규칙이 반영된 블록 스토리지와 달리, 객체 스토리지는 누구나 접속해서 어떤 포맷의 데이터, 어떤 용량의 데이터라도 저장할 수 있다.

## S3 서비스 아키텍처

---

### 로그 관리

- S3의 각종 이벤트를 추적해 로그 파일에 기록으로 남기는 것은 기본적으로 불능으로 설정되어 있다.
- S3 버킷의 작업이 워낙 많이 이뤄지기 때문에 로그 데이터를 일일히 기록하는것은 비효율적이다.
- S3 로그 기능을 활성화하려면 소스 버킷과 타겟 버킷을 설정해야 한다.
- 생성일 및 시간을 나타내는 접두사 및 분리기호를 지정해 다수의 소스 버킷에서 생성되는 다양한 로그 기록을 좀 더 찾기 쉽게 만든 뒤 타겟 버킷에 저장할 수 있다.
- S3 로그 생성 시 세부 내역 정보
    - 요청자의 계정 및 IP 주소
    - 소스 버킷 이름
    - 요청 작업 내역(GET, PUT, POST,  DELETE)
    - 요청을 한 시간
    - 요청에 대한 응답 상태(오류 코드 포함)

### S3의 내구성 및 가용성

### AWS Storage Gateway

- 로컬 스토리지와 클라우드 스토리지를 연결하는 백업 및 아카이브 통합 작업을 지원한다.
- 기업의 로컬 디바이스를 전통적인 테이프 드라이브처럼 연결할 수 있다.
- 데이터는 S3 또는 EBS 등 AWS 플랫폼에 저장해서 사용할 수 있다.
- 로컬 캐시에 저장한 뒤 로컬에서도 접속 지연 없이 사용할 수 있다.
- 게이트웨이 종류
    - 파일 게이트웨이
        - 파일 게이트웨이는 게이트웨이와 데이터를 송수신할 때 NFS 유형의 프로토콜을 사용한다.
        - 대개의 백업 솔루션은 NFS 나 파일 기반 백업을 사용한다.
    - 저장 볼륨 게이트웨이
        - 저장볼륨 게이트웨이는 데이터를 온프레미스 데이터 저장소에 저장하면서 비동기식으로 S3에 백업해서 재해 복구를 지원한다.
        - 데이터를 로컬에 젖아함으로써 네트워크 지연시간을 최소화한다.
        - 저장볼륨 게이트웨이만 데이터 세트 전체에 빠르게 액세스할 수 있도록 로컬 데이터를 제공한다.
    - 캐싱 볼륨 게이트웨이
        - 온사이트 스토리지의 비용을 줄이고자 한다.
        - 자주 사용하는 데이터에 짧은 지연 시간으로 액세스하고자 한다.
        - 전체 데이트 세트 내에서 특정 부분에서 지연시간이 발생한다.
        - 가장 많이 사용하는 데이터를 온프레미스의 로컬 캐시에 저장한다.
        - 전체 데이터 세트가 온프레미스에 있어야 하면 저장 볼륨 게이트웨이를 사용한다.
    - 테이프 게이트웨이
        - 테이프 게이트웨이는 원격지 테이프 디렉터리를 대체하는데 이상적이다.
        - 테이프 게이트웨이는 가상 테이프 디렉터리이며 실제 테이프를 원격 위치로 옮기는 비용을 줄일 수 있다.

### AWS Snowball

- 테라바이트급, 또는 페타바이트급 데이터 백업 또는 AWS 내에서의 데이터 활용이 필요한 경우 Snowball 이 해법이 된다.
- 기업이 보유한 데이터를 클라우드로 전송할 때는 다소 고가인 AWS Direct Connect 를 이용하거나 저렴한 AWS Snowball 을 이용하는 것이 실용적이다.
- 엑사바이트급 데이터라면 스토리지 컨테이너 운송차인 AWS Snowmobile을 통해 전송할 수 있다.
- 대규모 데이터를 AWS로 이동해야할 때는 항상 Snowball 을 검토한다.
- Snowball은 네트워크를 통해 데이터를 전송하지 않으면서 AWS로 물리적 장치를 통해 데이터를 전달할 수 있다.
- 네트워크 중단이나 속도 저하를 유발하지 않는 유일한 솔루션